@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    color-scheme: light;
    --wash-bg: radial-gradient(1200px 600px at 50% -10%, var(--wash-color, #10B981) 0%, transparent 70%);
  }

  body {
    @apply bg-paper font-body text-slate antialiased;
  }

  h1,
  h2,
  h3,
  h4 {
    @apply font-display text-slate;
  }

  a {
    @apply underline-offset-4 decoration-indigo/70 transition-colors hover:decoration-indigo;
  }
}

@layer components {
  .skip-link {
    @apply absolute left-4 top-4 z-[999] -translate-y-20 rounded-md bg-indigo px-4 py-2 text-sm font-semibold text-white shadow transition-transform focus:translate-y-0 focus-visible:focus-ring;
  }
}

@layer utilities {
  .bg-paper {
    background-color: #F8F7F4;
  }

  .focus-ring {
    @apply outline-none ring-2 ring-indigo ring-offset-2 ring-offset-paper;
  }

  .wash-layer {
    position: fixed;
    inset: 0;
    z-index: -1;
    pointer-events: none;
    background-image: var(--wash-bg);
    background-repeat: no-repeat;
    background-size: cover;
    opacity: 1;
    transition: background-image 400ms linear, opacity 200ms ease, filter 200ms ease;
  }

  .mask-wavy {
    -webkit-mask-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 600' preserveAspectRatio='none'><path d='M50,0 C65,60 35,120 50,180 C65,240 35,300 50,360 C65,420 35,480 50,540 L50,600 L0,600 L0,0 Z' fill='black'/></svg>");
    mask-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 600' preserveAspectRatio='none'><path d='M50,0 C65,60 35,120 50,180 C65,240 35,300 50,360 C65,420 35,480 50,540 L50,600 L0,600 L0,0 Z' fill='black'/></svg>");
    -webkit-mask-size: 100% 100%;
    mask-size: 100% 100%;
    -webkit-mask-repeat: no-repeat;
    mask-repeat: no-repeat;
    -webkit-mask-position: var(--mask-position, 50% 0);
    mask-position: var(--mask-position, 50% 0);
  }

  .parallax-layer {
    pointer-events: none;
    will-change: transform;
    mix-blend-mode: multiply;
    transition: transform 220ms ease;
  }

  .tilt-layer {
    --tilt-x: 0deg;
    --tilt-y: 0deg;
    --tilt-shadow-strength: 0.06;
    transform: perspective(1200px) rotateX(var(--tilt-x)) rotateY(var(--tilt-y));
    transition: transform 180ms ease, box-shadow 220ms ease;
    will-change: transform, box-shadow;
    box-shadow: 0 20px 45px rgba(15, 23, 42, var(--tilt-shadow-strength));
  }

  .glass-panel {
    background: linear-gradient(145deg, rgba(16, 185, 129, 0.06), rgba(6, 182, 212, 0.08));
    background-blend-mode: screen;
    background-color: rgba(255, 255, 255, 0.18);
    border: 1px solid rgba(255, 255, 255, 0.25);
    box-shadow: 0 10px 30px -10px rgba(11, 16, 32, 0.35);
    backdrop-filter: blur(30px);
    -webkit-backdrop-filter: blur(30px);
    will-change: transform;
    transition: transform 180ms ease, background-color 200ms ease, backdrop-filter 200ms ease, box-shadow 200ms ease, border-color 200ms ease;
  }

  .glass-panel:hover {
    background-color: rgba(255, 255, 255, 0.28);
    backdrop-filter: blur(18px);
    -webkit-backdrop-filter: blur(18px);
    box-shadow: 0 14px 40px -10px rgba(79, 70, 229, 0.35);
    border-color: rgba(79, 70, 229, 0.3);
  }

  .glass-border-emerald {
    box-shadow: 0 0 30px rgba(16, 185, 129, 0.18);
    border-color: rgba(16, 185, 129, 0.28) !important;
  }

  .glass-border-indigo {
    box-shadow: 0 0 34px rgba(79, 70, 229, 0.22);
    border-color: rgba(79, 70, 229, 0.3) !important;
  }

  .glass-border-gold {
    box-shadow: 0 0 32px rgba(245, 158, 11, 0.2);
    border-color: rgba(245, 158, 11, 0.32) !important;
  }

  .glass-border-rust {
    box-shadow: 0 0 28px rgba(180, 83, 9, 0.2);
    border-color: rgba(180, 83, 9, 0.3) !important;
  }

  .glass-text {
    text-shadow: 0 1px 1px rgba(11, 16, 32, 0.25);
    color: rgba(68, 64, 86, 0.92);
    transition: color 200ms ease, text-shadow 200ms ease;
  }

  .glass-heading {
    font-family: 'Playfair Display', 'Merriweather', serif;
    font-weight: 600;
    letter-spacing: -0.015em;
    color: rgba(24, 31, 44, 0.92);
    text-shadow: 0 1px 1px rgba(11, 16, 32, 0.25);
    transition: color 200ms ease, text-shadow 200ms ease;
  }

  .glass-body {
    color: rgba(71, 85, 105, 0.9);
    transition: color 200ms ease, text-shadow 200ms ease;
  }

  .glass-glow-heading {
    font-family: 'Playfair Display', 'Merriweather', serif;
    font-weight: 600;
    letter-spacing: -0.015em;
    color: rgba(255, 255, 255, 0.95);
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.45);
    transition: color 200ms ease, text-shadow 200ms ease;
  }

  .glass-glow-body {
    color: rgba(255, 255, 255, 0.9);
    text-shadow: 0 1px 1px rgba(0, 0, 0, 0.35);
    transition: color 200ms ease, text-shadow 200ms ease;
  }

  .glass-glow-muted {
    color: rgba(255, 255, 255, 0.7);
    text-shadow: 0 1px 1px rgba(0, 0, 0, 0.3);
    transition: color 200ms ease, text-shadow 200ms ease;
  }

  .glass-panel:hover .glass-heading,
  .glass-panel:focus-within .glass-heading,
  .glass-panel:hover .glass-text,
  .glass-panel:focus-within .glass-text,
  .glass-panel:hover .glass-body,
  .glass-panel:focus-within .glass-body,
  .glass-panel:hover .glass-glow-heading,
  .glass-panel:focus-within .glass-glow-heading,
  .glass-panel:hover .glass-glow-body,
  .glass-panel:focus-within .glass-glow-body,
  .glass-panel:hover .glass-glow-muted,
  .glass-panel:focus-within .glass-glow-muted {
    color: #ffffff;
    text-shadow: 0 0 6px rgba(255, 255, 255, 0.6);
  }

  .glass-panel:hover .glass-body,
  .glass-panel:focus-within .glass-body,
  .glass-panel:hover .glass-glow-body,
  .glass-panel:focus-within .glass-glow-body {
    color: rgba(255, 255, 255, 0.9);
  }

  .glass-panel:hover .glass-glow-muted,
  .glass-panel:focus-within .glass-glow-muted {
    color: rgba(255, 255, 255, 0.7);
  }

  .glass-glow-accent {
    text-shadow: 0 1px 1px rgba(0, 0, 0, 0.35);
    transition: color 200ms ease, text-shadow 200ms ease;
  }

  .glass-panel:hover .glass-glow-accent,
  .glass-panel:focus-within .glass-glow-accent {
    color: #ffffff !important;
    text-shadow: 0 0 6px rgba(255, 255, 255, 0.6);
  }

  .hero-ink-panel {
    --hero-spot-x: 50%;
    --hero-spot-y: 35%;
  }

  .hero-ink-heading {
    color: rgba(18, 24, 38, 0.97);
    text-shadow: 0 2px 4px rgba(15, 23, 42, 0.32), 0 12px 22px rgba(15, 23, 42, 0.18);
    transition: color 240ms ease, text-shadow 240ms ease, filter 240ms ease;
  }

  .hero-ink-body {
    color: rgba(45, 55, 72, 0.94);
    text-shadow: 0 1px 2px rgba(15, 23, 42, 0.24);
    transition: color 240ms ease, text-shadow 240ms ease, filter 240ms ease;
  }

  .hero-ink-muted {
    color: rgba(71, 85, 105, 0.85);
    text-shadow: 0 1px 2px rgba(15, 23, 42, 0.2);
    transition: color 240ms ease, text-shadow 240ms ease, filter 240ms ease;
  }

  .hero-ink-panel.glass-panel::after {
    content: '';
    position: absolute;
    inset: 1.5rem;
    border-radius: inherit;
    pointer-events: none;
    background: radial-gradient(circle at var(--hero-spot-x) var(--hero-spot-y), rgba(255, 255, 255, 0.32), transparent 65%);
    opacity: 0;
    filter: blur(0px);
    transition: opacity 260ms ease, filter 260ms ease;
  }

  .hero-ink-panel.glass-panel:hover::after,
  .hero-ink-panel.glass-panel:focus-within::after {
    opacity: 1;
    filter: blur(18px);
  }

  .hero-ink-panel.glass-panel:hover .hero-ink-heading,
  .hero-ink-panel.glass-panel:focus-within .hero-ink-heading {
    color: rgba(24, 32, 48, 0.96);
    text-shadow:
      0 3px 10px rgba(15, 23, 42, 0.38),
      0 14px 26px rgba(15, 23, 42, 0.18),
      0 0 18px rgba(255, 255, 255, 0.75),
      0 0 38px rgba(167, 210, 255, 0.5),
      0 0 55px rgba(244, 255, 252, 0.45);
    filter: drop-shadow(0 0 18px rgba(255, 255, 255, 0.55)) drop-shadow(0 0 34px rgba(111, 213, 240, 0.35));
  }

  .hero-ink-panel.glass-panel:hover .hero-ink-body,
  .hero-ink-panel.glass-panel:focus-within .hero-ink-body {
    color: rgba(48, 61, 84, 0.94);
    text-shadow:
      0 2px 6px rgba(15, 23, 42, 0.3),
      0 0 14px rgba(255, 255, 255, 0.6),
      0 0 28px rgba(167, 210, 255, 0.45);
    filter: drop-shadow(0 0 14px rgba(255, 255, 255, 0.45));
  }

  .hero-ink-panel.glass-panel:hover .hero-ink-muted,
  .hero-ink-panel.glass-panel:focus-within .hero-ink-muted {
    color: rgba(75, 90, 112, 0.88);
    text-shadow:
      0 2px 4px rgba(15, 23, 42, 0.22),
      0 0 12px rgba(255, 255, 255, 0.5),
      0 0 26px rgba(167, 210, 255, 0.4);
    filter: drop-shadow(0 0 12px rgba(255, 255, 255, 0.4));
  }

  .glass-scrim {
    background: linear-gradient(180deg, rgba(15, 23, 42, 0.1), transparent 45%, rgba(15, 23, 42, 0.1));
    border-radius: inherit;
    padding: clamp(0.75rem, 2vw, 1.25rem);
  }

  .glass-link {
    color: rgb(76 81 191 / 0.95);
    text-decoration-thickness: 2px;
  }

  .glass-link:hover {
    color: rgb(69 72 178);
  }

  .type-caret::after {
    content: '';
    @apply ml-1 inline-block h-8 w-[2px] bg-indigo align-middle animate-caret;
  }
}

:focus-visible {
  @apply focus-ring;
}

@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }

  .wash-layer {
    transition: none !important;
  }

  .parallax-layer {
    transform: none !important;
  }
}
